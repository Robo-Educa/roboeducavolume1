<div align="center">
<img src="static/images/logo.png" alt="Logo">
</div>

<hr>

[English Version](/README.md)

![Portuguese](https://img.shields.io/badge/Language-English-blue)
<hr>

## ğŸ¤“ Aprenda a programar construindo seu prÃ³prio robÃ´.

RobÃ´ Educa  Ã© uma plataforma inovadora que ensina programaÃ§Ã£o para crianÃ§as de 6 a 14 anos, promovendo a inclusÃ£o e a sustentabilidade ğŸ¤â™»ï¸. A jornada comeÃ§a com uma histÃ³ria inspiradora de dois irmÃ£os, Suzy e OtÃ¡vio, que desejam construir um robÃ´ ğŸ¤– e contam com a ajuda de seu professor Carlos Sales ğŸ‘¨â€ğŸ« que os incentiva a montar seu prÃ³prio robÃ´ humanoide utilizando materiais reciclados, programaÃ§Ã£o e nuvem â™»ï¸ğŸ’»â˜ï¸.

Ã‰ neste contexto que surge o Web Aplicativo RobÃ´ Educa que acessÃ­vel a partir de qualquer smartphone ğŸ“± se torna o "cÃ©rebro" do robÃ´ ğŸ§  interagindo com a crianÃ§a atravÃ©s de  mensagens de Ã¡udio ğŸ—£ï¸ tornando-o acessÃ­vel inclusive para pessoas com deficiÃªncia visual. A montagem do robÃ´ e a interaÃ§Ã£o com o aplicativo estimulam a coordenaÃ§Ã£o motora ğŸ–ï¸ e a criatividade âœ¨ ensinando a crianÃ§a conceitos tecnolÃ³gicos de forma lÃºdica e inclusiva.

E toda a mÃ¡gica realizado pelo aplicativo sÃ³ Ã© possÃ­vel por conta do uso da **Google GEMINI API** ğŸ¤– que permite ao RobÃ´ Educa entender e responder Ã s perguntas da crianÃ§a, explicar conceitos complexos ğŸ¤¯ e realizar quizzes gamificados ğŸ‰. Essa tecnologia disponÃ­vel na nuvem da Google transforma o aprendizado em uma conversa natural e divertida ğŸ˜„ abrindo novas perspectivas para o futuro destas crianÃ§as ğŸš€.

## ğŸ’ª HistÃ³rico de Impacto Social

Desde o ano de 2018 este trabalho jÃ¡ impactou centenas de crianÃ§as em diversas comunidades carentes na cidade de **Salvador, Bahia - Brasil**.

O idealizador deste projeto, [Carlos Sales](https://drive.google.com/file/d/1KPPJQhNn_YsWYK6qllP6muns6WlSRyM1/view?usp=sharing), Ã© um homem negro de origem perifÃ©rica graduado em CiÃªncia de Dados e Desenvolvedor de Sistemas. O mesmo conta um pouco da sua histÃ³ria no documentÃ¡rio [C0d3rs Championship](https://www.primevideo.com/detail/0GS98CG03BVM7C224YK7KIWXOJ) disponÃ­vel no Amazon Prime Video.

Mas foi somente no ano de 2024 com o advento das **IA Generativas** e da **Google GEMINI API**, que o robÃ´ passou a ter um **cÃ©rebro** capaz de responder de forma inteligente e rÃ¡pida, tornando a interaÃ§Ã£o muito mais flÃºida e encantadora ğŸ˜„!

<div style="display: flex;">
<img src="static/images/image1.jpg" alt="Imagem 1" style="width: 22%; margin-right: 8px;">
<img src="static/images/image2.jpg" alt="Imagem 2" style="width: 22%; margin-right: 8px;">
<img src="static/images/image3.jpg" alt="Imagem 3" style="width: 22%; margin-right: 8px;">
<img src="static/images/image4.jpg" alt="Imagem 4" style="width: 22%;">
</div>

#### ğŸ“¸ Visite nossa [galeria de fotos](https://photos.app.goo.gl/yJiewdTTsNFtmF846) para conhecer mais sobre nossas oficinas de inclusÃ£o digital.

#### ğŸ“¢ Assista o [depoimento](https://youtu.be/rjb9G7iBl8Q) de diretores, professores e alunos que jÃ¡ utilizaram nossa plataforma.

## Como as coisas funcionam

### ğŸ‘¤ CORPO

A plataforma **RobÃ´ Educa** oferece uma experiÃªncia prÃ¡tica e criativa para os alunos, orientando-os na montagem fÃ­sica de um robÃ´ humanoide. Este robÃ´ pode ser feito com materiais reciclÃ¡veis como garrafas PET â™»ï¸ ou kits em madeira MDF. ApÃ³s a montagem fÃ­sica, os alunos dÃ£o vida ao robÃ´ usando o "cÃ©rebro" dele ğŸ§ , que Ã© o aplicativo contido neste repositÃ³rio.

<div style="display: flex;">
<img src="static/images/robopet1.jpg" alt="Robo Educa VersÃ£o Garrafa PET" style="width: 22%; margin-right: 8px;">
<img src="static/images/robopet2.jpg" alt="RobÃ´ Educa em MDF versÃ£o 1" style="width: 22%; margin-right: 8px;">
<img src="static/images/robopet3.jpg" alt="RobÃ´ Educa em MDF versÃ£o 2" style="width: 22%; margin-right: 8px;">
<img src="static/images/robopet4.jpg" alt="RobÃ´ Educa em MDF manuseado por crianÃ§a" style="width: 22%;">
</div>

### ğŸ§  CÃ‰REBRO

O aplicativo, cÃ©rebro do robÃ´, permite que o mesmo desempenhe funÃ§Ãµes cognitivas como ouvir, pensar e falar. 

#### Tecnologias utilizadas na construÃ§Ã£o do aplicativo

<div align="center">
<img src="static/images/gemini.png" alt="Logo Build with Gemini">
</div>

- ![Pyton](https://img.shields.io/badge/python-v3-green)
- ![HTML](https://img.shields.io/badge/HTML-5-orange)
- ![JavaScript](https://img.shields.io/badge/JavaScript-ES6-yellow)
- ![Google Cloud](https://img.shields.io/badge/Google_Cloud-gray?style=for-the-badge&logo=google-cloud)

<hr>

### Arquitetura

A aplicaÃ§Ã£o Ã© desenvolvida utilizando ferramentas open-source. O backend Ã© desenvolvido em Python usando o framework Flask e o FrontEnd Ã© todo feito em HTML e Javascript.

### Arquivos Principais e Funcionalidades

![Pyton](https://img.shields.io/badge/python-v3-green)

### Backend - `routes.py`
O arquivo `main.py` gerencia todas as rotas disponÃ­veis na aplicaÃ§Ã£o. Ã‰ aqui que diferentes endpoints sÃ£o definidos para lidar com as interaÃ§Ãµes dos usuÃ¡rios e o processamento de dados.

```python
# DependÃªncias
from main import app
from flask import render_template, request, session, redirect, url_for, make_response, jsonify

# PÃ¡gina inicial/Index
@app.route('/')
def home():
    return render_template('index.html')

# Troca de mensagens entre usuÃ¡rio e bot
@app.route('/talk', methods=['POST']) 
# InteraÃ§Ã£o com a Google Gemini API
def talk(userMessage):        
    # Inicia interaÃ§Ã£o com Gemini AI
    try:
        convo = model.start_chat(history = [])              # Inicia chat
        convo.send_message(userMessage)                     # envia nova mensagem para ser processada pela IA
        bot_response = convo.last.text                      # Obtem resposta da IA
    except:
        bot_response = "error"

    response = {"status": "success", "message": bot_response}
    return response
```

### Frontend - HTML, CSS e JavaScript

![HTML](https://img.shields.io/badge/HTML-5-orange)

O frontend Ã© implementado utilizando HTML, CSS e JavaScript, focando na simplicidade e facilidade de uso. Ele comeÃ§a solicitando o acesso ao microfone, que Ã© gerenciado pelo `static/js/mediadevices.js`.

#### Acesso ao Microfone:

![JavaScript](https://img.shields.io/badge/JavaScript-ES6-yellow)

Quando o aplicativo Ã© iniciado, ele verifica as permissÃµes para uso do microfone. Se for a primeira vez que o usuÃ¡rio acessa o app, ele serÃ¡ solicitado a conceder a permissÃ£o. Este processo Ã© gerenciado pelo arquivo `static/js/mediadevices.js`.

```javascript
async function devices_micPrompt() {
    let permission;
    await navigator.mediaDevices
        .getUserMedia({
            audio: true
        })
        .then(function (stream) {
            permission = "granted"        
        })
        .catch(function (error) {
            if (error.message == "Requested device not found") {
                permission = "notFound";
            } else if (error.message == "Permission denied") {
                permission = "denied";
            } else {
                console.log(error.message)
                permission = 'error';
            }
        });
    return permission;
}
```

#### InteraÃ§Ã£o:
ApÃ³s o login bem-sucedido, a interaÃ§Ã£o comeÃ§a no frontend com o arquivo `templates/interaction.html`. A interface visual, gerenciada pelo arquivo `statis/js/display.js`, Ã© simples, com elementos que simbolizam escuta, pensamento e fala.

**Escuta ContÃ­nua e Processamento de Fala**:
O robÃ´ comeÃ§a com uma saudaÃ§Ã£o e convida o usuÃ¡rio a participar de um quiz sobre programaÃ§Ã£o. ApÃ³s falar, o app ativa o microfone em modo contÃ­nuo, escutando o que o usuÃ¡rio fala. Essas tarefas sÃ£o realizadas pelo arquivo `static/js/talk.js`, que utiliza as APIs `Media Devices`, `SpeechRecognition()` e `SpeechSynthesisUtterance()`.

#### ğŸ¦» OUVIR

![JavaScript](https://img.shields.io/badge/JavaScript-ES6-yellow)

```javascript
recognition = new SpeechRecognition();
recognition.lang = "pt-BR";
recognition.continuous = true;      // Reconhecimento contÃ­nuo em loop
recognition.interimResults = false; // resultados parciais

// Este evento Ã© acionado quando o reconhecimento de voz captura um resultado
recognition.onresult = event => {    
    const transcript = event.results[event.resultIndex][0].transcript;    
    talk(transcript);           // Envia transcriÃ§Ã£o do audio falado pelo usuÃ¡rio para o backend processar junto Ã  InteligÃªncia Artificial e dar uma respectiva resposta
};

// Verifica se usuÃ¡rio nÃ£o estiver falando (reproduzindo audio). ApÃ³s 1 minuto de inatividade, interrrompe reconhecimento e exibe botÃ£o de pausa
recognition.onend = () => {
    if (speakStatus == false) {     
        timestampAtual = Date.now();
        var diferenca = timestampAtual - timestampParam;
        var minutosPassados = diferenca / (1000 * 60);
        if (minutosPassados < 1) {
            recognition.start(); // Inicia o reconhecimento de voz
        } else {
            hideAllExceptClose();
            showElement("divPauseStart");
        }
    }        
};
```

#### ğŸ—£ï¸ FALAR

![JavaScript](https://img.shields.io/badge/JavaScript-ES6-yellow)

```javascript
// Sintese de Fala - faz o dispositivo reproduzir uma mensagem atravÃ©s de seus autofalantes/fones
function speak(message) {
    message = removerEmojis(message);
    const utterThis = new SpeechSynthesisUtterance(message);
    utterThis.pitch = 2;
    utterThis.rate = 4;

    utterThis.onstart = function () {
        hideAllExceptClose();                   // Oculta elementos que estiverem visiveis na tela
        showElement("divSpinnerWaves");                
    };

    utterThis.onend = function () {        
        speakStatus=false;
        hideAllExceptClose();                   // Oculta elementos que estiverem visiveis na tela
        showElement("divSpinnerRipple");        // Exibe Spinner simulando ondulaÃ§ao de escuta 
        recognition.start();                    // Inicia o reconhecimento de voz 
        timestampParam = Date.now();       
    };

    recognition.stop();                         // Ao iniciar a fala (reproduÃ§Ã£o do audio) Interrompe o reconhecimento de voz
    speakStatus=true;                           // Speaking     on=true  off=false
    synth.speak(utterThis);                     // inicia a reproduÃ§Ã£o da mensagem    
}

// Remove emojis da mensagem, para que a mesma possa ser reproduzida via sintese de fala
function removerEmojis(texto) {
    return texto
        .replace(/\p{Emoji}/gu, '') // Remove emojis
        .replace(/\s+/g, ' ') // Remove espaÃ§os em branco extras
        .trim(); // Remove espaÃ§os em branco no inÃ­cio e no fim
}
```

### ğŸ§  Processamento Cognitivo com a API Google Gemini

![Google Cloud](https://img.shields.io/badge/Google_Cloud-gray?style=for-the-badge&logo=google-cloud)

#### Rapidez nas respostas utilizando o modelo: **gemini-1.5-flash** 

Quando uma frase completa Ã© detectada, ela Ã© enviada para o backend para processamento cognitivo. Esta tarefa Ã© realizada pela **API do GEMINI**, utilizando o modelo `gemini-1.5-flash` que produz respostas rÃ¡pidas e precisas, garantindo conversas fluidas que tornam o robÃ´ mais **envolvente e realista**.

#### Engenharia de Prompt

Utilizamos a tÃ©cnica **Zero-Shot Prompting** aliada a um recurso do SDK do GEMINI, as **System instructions**, que fornecem um quadro de referÃªncia para o modelo, ajudando-o a compreender a tarefa e a responder de forma adequada sem precisar de exemplos especÃ­ficos.

```python
import google.generativeai as genai

genai.configure(api_key=my_api_key)

system_instruction = os.environ.get("SYSTEM_INSTRUCTIONS")    # Gemini - InstruÃ§Ãµes do Sistema / Informa as caracteristicas do Assistente.

model = genai.GenerativeModel(model_name=ai_model,
        generation_config=generation_config,
        system_instruction=system_instruction,
        safety_settings=safety_settings)
```

### Configurando a criatividade das respostas

O parÃ¢metro `generation_config` Ã© utilizado para controlar o comportamento do modelo de linguagem durante a geraÃ§Ã£o de texto. Ele contÃ©m vÃ¡rias configuraÃ§Ãµes importantes que influenciam a criatividade, o foco e o tamanho das respostas do modelo. 

Em especial chamamos a atenÃ§Ã£o para a configuraÃ§Ã£o de **TEMPERATURE'** que controla o grau de aleatoriedade nas respostas. Valores mais altos (prÃ³ximos a 2) levam a resultados mais criativos e diversificados, mas podem ser menos previsÃ­veis e eventualente podem conter erros/alucinaÃ§Ãµes. Valores mais baixos (prÃ³ximos a 0) geram respostas mais focadas e conservadoras, porÃ©m, tendendo a repetir padrÃµes comuns. 

A configuraÃ§Ã£o `max_output_tokens` define o nÃºmero mÃ¡ximo de tokens (palavras ou subpalavras) que o modelo pode gerar na resposta. Isso evita respostas excessivamente longas e ajuda a controlar o tempo de processamento.

```python
generation_config = {
  "temperature": 1,
  "top_p": 0.95,
  "top_k": 64,
  "max_output_tokens": 8192  
}
```

### ğŸ›¡ï¸ ConteÃºdo para crianÃ§as - SeguranÃ§a no comportamento do modelo 

A **Google Gemini API** oferece uma funcionalidade chamada `safety_settings` que permite controlar o comportamento do modelo de linguagem em relaÃ§Ã£o Ã  seguranÃ§a, especialmente em conversas com crianÃ§as. Ao instanciar o modelo Ã© possÃ­vel definir os nÃ­veis desejados de proteÃ§Ã£o contra conteÃºdo imprÃ³prio ou perigoso.

```python
safety_settings = [  
  {
    "category": "HARM_CATEGORY_HARASSMENT",
    "threshold": "BLOCK_LOW_AND_ABOVE"
  },
  {
    "category": "HARM_CATEGORY_HATE_SPEECH",
    "threshold": "BLOCK_LOW_AND_ABOVE"
  },
  {
    "category": "HARM_CATEGORY_SEXUALLY_EXPLICIT",
    "threshold": "BLOCK_LOW_AND_ABOVE"
  },
  {
    "category": "HARM_CATEGORY_DANGEROUS_CONTENT",
    "threshold": "BLOCK_LOW_AND_ABOVE"
  }
]
```

Sendo:

 **category**: A categoria especÃ­fica de conteÃºdo prejudicial que vocÃª deseja bloquear. As categorias disponÃ­veis sÃ£o:

* HARM_CATEGORY_HARASSMENT: Bloqueia conteÃºdo que pode ser considerado bullying, assÃ©dio ou perseguiÃ§Ã£o.
* HARM_CATEGORY_HATE_SPEECH: Bloqueia conteÃºdo que promove o Ã³dio, a violÃªncia ou a discriminaÃ§Ã£o contra grupos especÃ­ficos.
* HARM_CATEGORY_SEXUALLY_EXPLICIT: Bloqueia conteÃºdo sexualmente explÃ­cito ou sugestivo.
* HARM_CATEGORY_DANGEROUS_CONTENT: Bloqueia conteÃºdo que pode ser considerado perigoso, como instruÃ§Ãµes para atividades perigosas ou informaÃ§Ãµes sobre como fabricar armas.

E:

**threshold**: O parÃ¢metro que define o nÃ­vel de rigor com que o modelo deve bloquear conteÃºdo dentro de uma determinada categoria. O valor selecionado foi:

**BLOCK_LOW_AND_ABOVE**: Bloqueia qualquer conteÃºdo dentro da categoria que seja considerado "baixo", "mÃ©dio" ou "alto" em termos de risco. Este Ã© o nÃ­vel de seguranÃ§a mais alto e Ã© adequado para ambientes onde a proteÃ§Ã£o de crianÃ§as Ã© priorizada.


### âœ… ConclusÃ£o

O RobÃ´ Educa combina criatividade fÃ­sica com inteligÃªncia artificial de ponta para criar uma experiÃªncia interativa e educacional para crianÃ§as. A arquitetura modular da plataforma e o uso de tecnologias web modernas a tornam escalÃ¡vel, segura e adaptÃ¡vel a diversos ambientes de aprendizado.

## ğŸ’» Como executar este aplicativo em seu PC Windows

1. Clone o repositÃ³rio:
```
$ git clone https://github.com/Robo-Educa/robo-educa-gemini-server.git 
```
2. Instale as dependÃªncias:
```
$ cd robo-educa-gemini-server
$ pip install -r requirements.txt
```
3. Crie um arquivo .ENV a partir do .ENV.EXAMPLE e preencha os valores das variÃ¡veis de ambiente conforme o seu projeto.

4. Execute o projeto:
```
$ python main.py
```
5. Teste no Navegador:
```
http://localhost:5000
```

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ licenciado sob a [Apache 2.0 License](LICENSE). Observe tambÃ©m os Termos de ServiÃ§o.

## ğŸ¤ ContribuiÃ§Ãµes

ContribuiÃ§Ãµes sÃ£o bem-vindas! Sinta-se Ã  vontade para abrir um pull request ou colaborar de qualquer outra forma.

ğŸ’ª E vocÃª? Gostou? EntÃ£o faÃ§a sua parte e colabore com esta iniciativa para que possamos ampliar ainda mais o nosso impacto.

* Contatos/WhatsApp: +55 (71) 9.9341-6896 
* E-mail: roboeduca.net@gmail.com

<div style="display: flex;">
<img src="static/images/ods1.jpg" alt="Ods 4" style="width: 30%; margin-right: 5px;">
<img src="static/images/ods2.jpg" alt="ODS ONU" style="width: 30%; margin-right: 5px;">
<img src="static/images/ods3.jpg" alt="Ods 10" style="width: 30%;">
</div>